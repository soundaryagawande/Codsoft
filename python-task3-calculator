from PyQt5 import QtCore, QtGui, QtWidgets


class Ui_calcu(object):
    def setupUi(self, calcu):
        calcu.setObjectName("calcu")
        calcu.resize(521, 577)
        self.gridLayoutWidget = QtWidgets.QWidget(calcu)
        self.gridLayoutWidget.setGeometry(QtCore.QRect(14, 180, 495, 381))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.gridLayoutWidget.setFont(font)
        self.gridLayoutWidget.setObjectName("gridLayoutWidget")
        self.gridLayout = QtWidgets.QGridLayout(self.gridLayoutWidget)
        self.gridLayout.setContentsMargins(0, 0, 0, 0)
        self.gridLayout.setObjectName("gridLayout")
        self.sub_pb = QtWidgets.QPushButton(self.gridLayoutWidget,clicked =lambda:self.press("-"))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.sub_pb.setFont(font)
        self.sub_pb.setObjectName("sub_pb")
        self.gridLayout.addWidget(self.sub_pb, 3, 4, 1, 1)
        self.equals_pb = QtWidgets.QPushButton(self.gridLayoutWidget,clicked =lambda:self.press("="))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.equals_pb.setFont(font)
        self.equals_pb.setObjectName("equals_pb")
        self.gridLayout.addWidget(self.equals_pb, 5, 4, 1, 1)
        self.cleap_pb = QtWidgets.QPushButton(self.gridLayoutWidget,clicked =lambda:self.press("C"))
        self.cleap_pb.setEnabled(True)
        font = QtGui.QFont()
        font.setPointSize(20)
        self.cleap_pb.setFont(font)
        self.cleap_pb.setAutoRepeatInterval(100)
        self.cleap_pb.setObjectName("cleap_pb")
        self.gridLayout.addWidget(self.cleap_pb, 0, 0, 1, 1)
        self.div_pb = QtWidgets.QPushButton(self.gridLayoutWidget,clicked =lambda:self.press("/"))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.div_pb.setFont(font)
        self.div_pb.setObjectName("div_pb")
        self.gridLayout.addWidget(self.div_pb, 0, 4, 1, 1)
        self.n4_pb = QtWidgets.QPushButton(self.gridLayoutWidget,clicked =lambda:self.press("4"))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.n4_pb.setFont(font)
        self.n4_pb.setObjectName("n4_pb")
        self.gridLayout.addWidget(self.n4_pb, 3, 0, 1, 1)
        self.add_pb = QtWidgets.QPushButton(self.gridLayoutWidget,clicked =lambda:self.press("+"))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.add_pb.setFont(font)
        self.add_pb.setObjectName("add_pb")
        self.gridLayout.addWidget(self.add_pb, 4, 4, 1, 1)
        self.n5_pb = QtWidgets.QPushButton(self.gridLayoutWidget,clicked =lambda:self.press("5"))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.n5_pb.setFont(font)
        self.n5_pb.setObjectName("n5_pb")
        self.gridLayout.addWidget(self.n5_pb, 3, 1, 1, 1)
        self.n2_pb = QtWidgets.QPushButton(self.gridLayoutWidget,clicked =lambda:self.press("2"))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.n2_pb.setFont(font)
        self.n2_pb.setObjectName("n2_pb")
        self.gridLayout.addWidget(self.n2_pb, 4, 1, 1, 1)
        self.n9_pb = QtWidgets.QPushButton(self.gridLayoutWidget,clicked =lambda:self.press("9"))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.n9_pb.setFont(font)
        self.n9_pb.setObjectName("n9_pb")
        self.gridLayout.addWidget(self.n9_pb, 2, 2, 1, 1)
        self.n3_pb = QtWidgets.QPushButton(self.gridLayoutWidget,clicked =lambda:self.press("3"))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.n3_pb.setFont(font)
        self.n3_pb.setObjectName("n3_pb")
        self.gridLayout.addWidget(self.n3_pb, 4, 2, 1, 1)
        self.n7_pb = QtWidgets.QPushButton(self.gridLayoutWidget,clicked =lambda:self.press("7"))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.n7_pb.setFont(font)
        self.n7_pb.setObjectName("n7_pb")
        self.gridLayout.addWidget(self.n7_pb, 2, 0, 1, 1)
        self.n6_pb = QtWidgets.QPushButton(self.gridLayoutWidget,clicked =lambda:self.press("6"))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.n6_pb.setFont(font)
        self.n6_pb.setObjectName("n6_pb")
        self.gridLayout.addWidget(self.n6_pb, 3, 2, 1, 1)
        self.n0_pb = QtWidgets.QPushButton(self.gridLayoutWidget,clicked =lambda:self.press("0"))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.n0_pb.setFont(font)
        self.n0_pb.setObjectName("n0_pb")
        self.gridLayout.addWidget(self.n0_pb, 5, 1, 1, 1)
        self.n00_pb = QtWidgets.QPushButton(self.gridLayoutWidget,clicked =lambda:self.remove("<<<"))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.n00_pb.setFont(font)
        self.n00_pb.setObjectName("n00_pb")
        self.gridLayout.addWidget(self.n00_pb, 5, 0, 1, 1)
        self.mul_pb = QtWidgets.QPushButton(self.gridLayoutWidget,clicked =lambda:self.press("*"))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.mul_pb.setFont(font)
        self.mul_pb.setObjectName("mul_pb")
        self.gridLayout.addWidget(self.mul_pb, 2, 4, 1, 1)
        self.n8_pb = QtWidgets.QPushButton(self.gridLayoutWidget,clicked =lambda:self.press("8"))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.n8_pb.setFont(font)
        self.n8_pb.setObjectName("n8_pb")
        self.gridLayout.addWidget(self.n8_pb, 2, 1, 1, 1)
        self.prcnt_pb = QtWidgets.QPushButton(self.gridLayoutWidget,clicked =lambda:self.press("%"))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.prcnt_pb.setFont(font)
        self.prcnt_pb.setObjectName("prcnt_pb")
        self.gridLayout.addWidget(self.prcnt_pb, 0, 1, 1, 1)
        self.dot_pb = QtWidgets.QPushButton(self.gridLayoutWidget,clicked =lambda:self.press_dot("."))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.dot_pb.setFont(font)
        self.dot_pb.setObjectName("dot_pb")
        self.gridLayout.addWidget(self.dot_pb, 5, 2, 1, 1)
        self.n1_pb = QtWidgets.QPushButton(self.gridLayoutWidget,clicked =lambda:self.press("1"))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.n1_pb.setFont(font)
        self.n1_pb.setObjectName("n1_pb")
        self.gridLayout.addWidget(self.n1_pb, 4, 0, 1, 1)
        self.power_pb = QtWidgets.QPushButton(self.gridLayoutWidget,clicked =lambda:self.press("**"))
        self.power_pb.setObjectName("power_pb")
        self.gridLayout.addWidget(self.power_pb, 0, 2, 1, 1)
        self.label = QtWidgets.QLabel(calcu)
        self.label.setGeometry(QtCore.QRect(20, 20, 481, 151))
        font = QtGui.QFont()
        font.setPointSize(36)
        self.label.setFont(font)
        self.label.setFrameShape(QtWidgets.QFrame.Panel)
        self.label.setLineWidth(1)
        self.label.setAlignment(QtCore.Qt.AlignRight|QtCore.Qt.AlignTrailing|QtCore.Qt.AlignVCenter)
        self.label.setObjectName("label")

        self.retranslateUi(calcu)
        QtCore.QMetaObject.connectSlotsByName(calcu)
    

    def remove(self,output):
        output=self.label.text()
        output=output[:-1]
        self.label.setText(output)

    def press_dot(self,output):
        output = self.label.text()
        if "." in output:
            pass
        else:
            self.label.setText(f"{output}.")

    def press(self,pressed):
        if pressed == "=":
            final=self.label.text()
            ans= eval(final)
            self.label.setText(str(ans))
        elif pressed == "%":
            try:
                current_value = float(self.label.text())
                percentage_value = current_value / 100
                self.label.setText(str(percentage_value))

            except Exception as e:
                self.label.setText("Error")

        elif pressed == "C":
            self.label.setText("0")
        else :
            if self.label.text() == "0":
                self.label.setText('')

            self.label.setText(f'{self.label.text()}{pressed}')

    def retranslateUi(self, calcu):
        _translate = QtCore.QCoreApplication.translate
        calcu.setWindowTitle(_translate("calcu", "Form"))
        self.sub_pb.setText(_translate("calcu", "-"))
        self.equals_pb.setText(_translate("calcu", "="))
        self.cleap_pb.setText(_translate("calcu", "C"))
        self.div_pb.setText(_translate("calcu", "/"))
        self.n4_pb.setText(_translate("calcu", "4"))
        self.add_pb.setText(_translate("calcu", "+"))
        self.n5_pb.setText(_translate("calcu", "5"))
        self.n2_pb.setText(_translate("calcu", "2"))
        self.n9_pb.setText(_translate("calcu", "9"))
        self.n3_pb.setText(_translate("calcu", "3"))
        self.n7_pb.setText(_translate("calcu", "7"))
        self.n6_pb.setText(_translate("calcu", "6"))
        self.n0_pb.setText(_translate("calcu", "0"))
        self.n00_pb.setText(_translate("calcu", "<<<"))
        self.mul_pb.setText(_translate("calcu", "x"))
        self.n8_pb.setText(_translate("calcu", "8"))
        self.prcnt_pb.setText(_translate("calcu", "%"))
        self.dot_pb.setText(_translate("calcu", "."))
        self.n1_pb.setText(_translate("calcu", "1"))
        self.power_pb.setText(_translate("calcu", "^"))
        self.label.setText(_translate("calcu", ""))


if __name__ == "__main__":
    import sys
    app = QtWidgets.QApplication(sys.argv)
    calcu = QtWidgets.QWidget()
    ui = Ui_calcu()
    ui.setupUi(calcu)
    calcu.show()
    sys.exit(app.exec_())
